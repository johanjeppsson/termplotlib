from __future__ import unicode_literals

import numpy as np
from raster import RasterCanvas

LETTERS = {
    # Capital letters
    'A' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0]], dtype=bool),
    'B' : np.array([[0, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0]], dtype=bool),
    'C' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [0, 1, 1, 0]], dtype=bool),
    'D' : np.array([[0, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0]], dtype=bool),
    'E' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 0, 0],
                    [1, 1, 1, 0]], dtype=bool),
    'F' : np.array([[0, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 0, 0],
                    [1, 1, 1, 0]], dtype=bool),
    'G' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 0, 0],
                    [0, 1, 1, 0]], dtype=bool),
    'H' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'I' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [1, 1, 1, 0]], dtype=bool),
    'J' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 0, 1, 0],
                    [1, 1, 1, 0]], dtype=bool),
    'K' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'L' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0]], dtype=bool),
    'M' : np.array([[0, 0, 0, 0, 0, 0],
                    [1, 0, 0, 0, 1, 0],
                    [1, 0, 0, 0, 1, 0],
                    [1, 0, 1, 0, 1, 0],
                    [1, 1, 0, 1, 1, 0],
                    [1, 0, 0, 0, 1, 0]], dtype=bool),
    'N' : np.array([[0, 0, 0, 0, 0],
                    [1, 0, 0, 1, 0],
                    [1, 0, 1, 1, 0],
                    [1, 1, 1, 1, 0],
                    [1, 1, 0, 1, 0],
                    [1, 0, 0, 1, 0]], dtype=bool),
    'O' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0]], dtype=bool),
    'P' : np.array([[0, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0]], dtype=bool),
    'Q' : np.array([[0, 0, 0, 0],
                    [0, 0, 1, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0]], dtype=bool),
    'R' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0]], dtype=bool),
    'S' : np.array([[0, 0, 0, 0],
                    [1, 1, 0, 0],
                    [0, 0, 1, 0],
                    [0, 1, 0, 0],
                    [1, 0, 0, 0],
                    [0, 1, 1, 0]], dtype=bool),
    'T' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [1, 1, 1, 0]], dtype=bool),
    'U' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'V' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'W' : np.array([[0, 0, 0, 0, 0, 0],
                    [0, 1, 0, 1, 0, 0],
                    [1, 0, 1, 0, 1, 0],
                    [1, 0, 1, 0, 1, 0],
                    [1, 0, 0, 0, 1, 0],
                    [1, 0, 0, 0, 1, 0]], dtype=bool),
    'X' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'Y' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0]], dtype=bool),
    'Z' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 0, 0],
                    [0, 1, 0, 0],
                    [0, 0, 1, 0],
                    [1, 1, 1, 0]], dtype=bool),

    # Lower case
    'a' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'b' : np.array([[0, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0]], dtype=bool),
    'c' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 0, 0],
                    [0, 1, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'd' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 1, 0],
                    [0, 0, 1, 0],
                    [0, 0, 1, 0]], dtype=bool),
    'e' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [1, 0, 0, 0],
                    [1, 1, 1, 0],
                    [0, 1, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'f' : np.array([[0, 0, 0],
                    [1, 0, 0],
                    [1, 0, 0],
                    [1, 1, 0],
                    [1, 0, 0],
                    [0, 1, 1]], dtype=bool),
    'g' : np.array([[1, 1, 0, 0],
                    [0, 0, 1, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 1, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'h' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 1, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0]], dtype=bool),
    'i' : np.array([[0, 0],
                    [1, 0],
                    [1, 0],
                    [0, 0],
                    [1, 0],
                    [0, 0]], dtype=bool),
    'j' : np.array([[0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [0, 0, 1, 0],
                    [0, 0, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 1, 0]], dtype=bool),
    'k' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 0, 0],
                    [1, 0, 0, 0]], dtype=bool),
    'l' : np.array([[0, 0],
                    [1, 0],
                    [1, 0],
                    [1, 0],
                    [1, 0],
                    [1, 0]], dtype=bool),
    'm' : np.array([[0, 0, 0, 0, 0, 0],
                    [1, 0, 0, 0, 1, 0],
                    [1, 0, 1, 0, 1, 0],
                    [1, 1, 0, 1, 1, 0],
                    [0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0]], dtype=bool),
    'n' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'o' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'p' : np.array([[1, 0, 0, 0],
                    [1, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'q' : np.array([[0, 0, 1, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [0, 1, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'r' : np.array([[0, 0, 0, 0],
                    [1, 0, 0, 0],
                    [1, 0, 1, 0],
                    [1, 1, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    's' : np.array([[0, 0, 0],
                    [1, 0, 0],
                    [0, 1, 0],
                    [1, 0, 0],
                    [0, 1, 0],
                    [0, 0, 0]], dtype=bool),
    't' : np.array([[0, 0, 0, 0],
                    [0, 1, 1, 0],
                    [0, 1, 0, 0],
                    [1, 1, 1, 0],
                    [0, 1, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'u' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'v' : np.array([[0, 0, 0, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'w' : np.array([[0, 0, 0, 0, 0, 0],
                    [0, 1, 0, 1, 0, 0],
                    [1, 0, 1, 0, 1, 0],
                    [1, 0, 0, 0, 1, 0],
                    [0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0]], dtype=bool),
    'x' : np.array([[0, 0, 0, 0],
                    [1, 0, 1, 0],
                    [0, 1, 0, 0],
                    [1, 0, 1, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'y' : np.array([[0, 1, 1, 0],
                    [0, 0, 1, 0],
                    [0, 1, 1, 0],
                    [1, 0, 1, 0],
                    [1, 0, 1, 0],
                    [0, 0, 0, 0]], dtype=bool),
    'z' : np.array([[0, 0, 0, 0],
                    [1, 1, 1, 0],
                    [1, 0, 0, 0],
                    [0, 0, 1, 0],
                    [1, 1, 1, 0],
                    [0, 0, 0, 0]], dtype=bool),

    # Separators
    ' ' : np.array([[0, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0]], dtype=bool),
    ',' : np.array([[1, 0],
                    [0, 1],
                    [0, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0]], dtype=bool),
    '.' : np.array([[0, 0],
                    [1, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0],
                    [0, 0]], dtype=bool),
    '!' : np.array([[0, 0],
                    [1, 0],
                    [0, 0],
                    [1, 0],
                    [1, 0],
                    [1, 0]], dtype=bool),


}

class Letter(RasterCanvas):
    def __init__(self, char):
        pattern = LETTERS[char]
        h, w = pattern.shape
        super(Letter, self).__init__(h, w, pattern=pattern)

class Text(RasterCanvas):
    def __init__(self, text):
        w = 0
        h = 0
        for c in text:
            l_h, l_w = LETTERS[c].shape
            w += l_w
            h = max(h, l_h)
        pattern = np.zeros((h, w), dtype=bool)
        i = 0
        for c in text:
            l_h, l_w = LETTERS[c].shape
            pattern[:, i:i+l_w] = LETTERS[c].copy()
            i += l_w
        super(Text, self).__init__(w, h, pattern)

if __name__ == '__main__':
    print Text('ABCDEFGHIJKLMNOPQRSTUVWXYZ')
    print Text('abcdefghijklmnopqrstuvwxyz')
    print Text('The quick brown fox, jumps over the lazy dog!')
